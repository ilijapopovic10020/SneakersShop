<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="SneakersShop.Components.Cards.ProductCardHorizontal"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:control="clr-namespace:SneakersShop.Controls"
    x:Name="HorizontalCard">
    <Border
        Padding="10"
        BackgroundColor="#f6f6f6"
        StrokeShape="RoundRectangle 20"
        StrokeThickness="0">
        <Grid ColumnDefinitions="120,*">
            <Image
                Grid.Column="0"
                Aspect="AspectFit"
                BindingContext="{x:Reference HorizontalCard}"
                Source="{Binding Image}"
                TranslationY="15" />
            <Grid
                Grid.Column="1"
                RowDefinitions="auto,auto,auto"
                RowSpacing="5"
                VerticalOptions="Center">
                <FlexLayout
                    Grid.Row="0"
                    VerticalOptions="End"
                    Wrap="Wrap">
                    <Label
                        BindingContext="{x:Reference HorizontalCard}"
                        FontAttributes="Bold"
                        FontSize="16"
                        Text="{Binding Brand}"
                        TextColor="{StaticResource Primary}" />
                    <Label
                        BindingContext="{x:Reference HorizontalCard}"
                        FontAttributes="Bold"
                        FontSize="16"
                        Text=" Patike "
                        TextColor="Black" />
                    <Label
                        BindingContext="{x:Reference HorizontalCard}"
                        FontAttributes="Bold"
                        FontSize="16"
                        Text="{Binding Name}"
                        TextColor="Black" />
                </FlexLayout>
                <VerticalStackLayout Grid.Row="1">
                    <Label
                        BindingContext="{x:Reference HorizontalCard}"
                        FontAttributes="Bold"
                        FontSize="16"
                        Text="{Binding OldPrice, StringFormat='{}{0:N2} RSD'}"
                        TextColor="{Binding TextColor}" />
                    <BoxView
                        BackgroundColor="{StaticResource Primary}"
                        BindingContext="{x:Reference HorizontalCard}"
                        HeightRequest="1"
                        HorizontalOptions="Start"
                        IsVisible="{Binding HasDiscount}"
                        TranslationY="-10"
                        WidthRequest="110" />
                    <Label
                        Grid.Row="1"
                        BindingContext="{x:Reference HorizontalCard}"
                        FontAttributes="Bold"
                        FontSize="16"
                        IsVisible="{Binding HasDiscount}"
                        Text="{Binding NewPrice, StringFormat='{}{0:N2} RSD'}"
                        TextColor="{StaticResource Primary}" />
                </VerticalStackLayout>

                <HorizontalStackLayout Grid.Row="2">
                    <control:RatingControl
                        Amount="5"
                        BindingContext="{x:Reference HorizontalCard}"
                        CurrentValue="{Binding AvgRating}"
                        StarSize="18" />
                    <Label
                        BindingContext="{x:Reference HorizontalCard}"
                        FontSize="12"
                        Text="{Binding CountReview, StringFormat='{0:(0)}'}"
                        TextColor="{StaticResource Gray400}"
                        VerticalOptions="End" />
                </HorizontalStackLayout>
            </Grid>
        </Grid>
        <Border.GestureRecognizers>
            <TapGestureRecognizer Tapped="ProductDetail_TapGestureRecognizer_Tapped" />
        </Border.GestureRecognizers>
    </Border>
</ContentView>
